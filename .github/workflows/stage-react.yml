name: Stage PR

on:
  workflow_dispatch:
    inputs:
      pr_number:
        description: 'PR number to stage'
        required: true
        type: number
      branch:
        description: 'Branch name to checkout'
        required: true
        type: string

jobs:
  stage:
    runs-on: [self-hosted, NUC]
    
    steps:
      - name: Checkout PR branch
        uses: actions/checkout@v4
        with:
          ref: ${{ inputs.branch }}
          clean: true

      - name: Validate environment
        run: bun run rubigo-react/scripts/production/deploy.ts validate-env

      - name: Debug info
        run: |
          echo "âœ… Phase 2 complete - checkout + validate-env"
          echo "Branch: ${{ inputs.branch }}"
          sleep 3
