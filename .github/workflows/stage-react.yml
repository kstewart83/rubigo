name: Stage PR

on:
  workflow_dispatch:
    inputs:
      pr_number:
        description: 'PR number to stage'
        required: true
        type: number
      branch:
        description: 'Branch name to checkout'
        required: true
        type: string

jobs:
  stage:
    runs-on: [self-hosted, NUC]
    
    steps:
      - name: Checkout PR branch
        uses: actions/checkout@v4
        with:
          ref: ${{ inputs.branch }}
          clean: true

      - name: Debug info
        run: |
          echo "✅ Checkout complete"
          echo "Branch: ${{ inputs.branch }}"
          echo "PR: ${{ inputs.pr_number }}"
          echo "Run ID: ${{ github.run_id }}"
          echo "PWD: $(pwd)"
          ls -la rubigo-react/scripts/production/ || echo "Scripts dir not found"
          sleep 5
          echo "✅ Phase 1 complete - minimal checkout only"
