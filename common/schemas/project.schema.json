{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://rubigo.dev/schemas/project.schema.json",
    "title": "Requirements & Delivery Ontology",
    "description": "Schema for the full Requirements & Delivery Ontology including Requirements Space, Solution Space, Activity Space, and Resource Space",
    "type": "object",
    "properties": {
        "description": {
            "type": "object",
            "properties": {
                "overview": {
                    "type": "string",
                    "description": "Overview of the project management data"
                }
            }
        },
        "solutions": {
            "type": "array",
            "items": {
                "$ref": "#/$defs/Solution"
            }
        },
        "products": {
            "type": "array",
            "items": {
                "$ref": "#/$defs/Product"
            }
        },
        "services": {
            "type": "array",
            "items": {
                "$ref": "#/$defs/Service"
            }
        },
        "releases": {
            "type": "array",
            "items": {
                "$ref": "#/$defs/Release"
            }
        },
        "projects": {
            "type": "array",
            "items": {
                "$ref": "#/$defs/Project"
            }
        },
        "objectives": {
            "type": "array",
            "items": {
                "$ref": "#/$defs/Objective"
            }
        },
        "features": {
            "type": "array",
            "items": {
                "$ref": "#/$defs/Feature"
            }
        },
        "rules": {
            "type": "array",
            "items": {
                "$ref": "#/$defs/Rule"
            }
        },
        "scenarios": {
            "type": "array",
            "items": {
                "$ref": "#/$defs/Scenario"
            }
        },
        "specifications": {
            "type": "array",
            "items": {
                "$ref": "#/$defs/Specification"
            }
        },
        "evidences": {
            "type": "array",
            "items": {
                "$ref": "#/$defs/Evidence"
            }
        },
        "evaluations": {
            "type": "array",
            "items": {
                "$ref": "#/$defs/Evaluation"
            }
        },
        "metrics": {
            "type": "array",
            "items": {
                "$ref": "#/$defs/Metric"
            }
        },
        "kpis": {
            "type": "array",
            "items": {
                "$ref": "#/$defs/KPI"
            }
        },
        "initiatives": {
            "type": "array",
            "items": {
                "$ref": "#/$defs/Initiative"
            }
        },
        "activities": {
            "type": "array",
            "items": {
                "$ref": "#/$defs/Activity"
            }
        },
        "roles": {
            "type": "array",
            "items": {
                "$ref": "#/$defs/Role"
            }
        },
        "assignments": {
            "type": "array",
            "items": {
                "$ref": "#/$defs/Assignment"
            }
        },
        "allocations": {
            "type": "array",
            "items": {
                "$ref": "#/$defs/Allocation"
            }
        }
    },
    "$defs": {
        "Solution": {
            "type": "object",
            "description": "Base entity for Products and Services. Common fields shared by both.",
            "required": [
                "id",
                "name"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier",
                    "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]*$"
                },
                "name": {
                    "type": "string",
                    "description": "Display name"
                },
                "description": {
                    "type": "string",
                    "description": "Optional description"
                },
                "status": {
                    "type": "string",
                    "enum": [
                        "pipeline",
                        "catalog",
                        "retired"
                    ],
                    "description": "Portfolio status"
                }
            }
        },
        "Product": {
            "type": "object",
            "description": "Deliverable that can be acquired/deployed by customers. Extends Solution.",
            "required": [
                "id",
                "solution_id"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier",
                    "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]*$"
                },
                "solution_id": {
                    "type": "string",
                    "description": "Reference to base Solution"
                },
                "version": {
                    "type": "string",
                    "description": "Current version"
                },
                "release_date": {
                    "type": "string",
                    "format": "date",
                    "description": "Last release date"
                }
            }
        },
        "Service": {
            "type": "object",
            "description": "Ongoing provision of value. Extends Solution.",
            "required": [
                "id",
                "solution_id"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier",
                    "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]*$"
                },
                "solution_id": {
                    "type": "string",
                    "description": "Reference to base Solution"
                },
                "service_level": {
                    "type": "string",
                    "description": "SLA tier"
                }
            }
        },
        "Release": {
            "type": "object",
            "description": "Versioned snapshot of a Product",
            "required": [
                "id",
                "product_id",
                "version"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier",
                    "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]*$"
                },
                "product_id": {
                    "type": "string",
                    "description": "Reference to parent Product"
                },
                "version": {
                    "type": "string",
                    "description": "Semantic version"
                },
                "release_date": {
                    "type": "string",
                    "format": "date",
                    "description": "Release date"
                },
                "notes": {
                    "type": "string",
                    "description": "Release notes"
                },
                "status": {
                    "type": "string",
                    "enum": [
                        "planned",
                        "released",
                        "deprecated"
                    ]
                }
            }
        },
        "Project": {
            "type": "object",
            "description": "Temporary effort to create or modify a solution",
            "required": [
                "id",
                "name",
                "solution_id"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier",
                    "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]*$"
                },
                "name": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "solution_id": {
                    "type": "string",
                    "description": "Reference to parent Solution"
                },
                "status": {
                    "type": "string",
                    "enum": [
                        "planning",
                        "active",
                        "on_hold",
                        "complete",
                        "cancelled"
                    ]
                },
                "start_date": {
                    "type": "string",
                    "format": "date"
                },
                "end_date": {
                    "type": "string",
                    "format": "date"
                }
            }
        },
        "Objective": {
            "type": "object",
            "description": "High-level strategic goal",
            "required": [
                "id",
                "title",
                "project_id"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier",
                    "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]*$"
                },
                "title": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "project_id": {
                    "type": "string",
                    "description": "Reference to parent project"
                },
                "parent_id": {
                    "type": "string",
                    "description": "Reference to parent objective for hierarchy"
                },
                "status": {
                    "type": "string",
                    "enum": [
                        "draft",
                        "active",
                        "achieved",
                        "deferred"
                    ]
                }
            }
        },
        "Feature": {
            "type": "object",
            "description": "Distinct capability that helps satisfy an objective",
            "required": [
                "id",
                "name",
                "objective_id"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier",
                    "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]*$"
                },
                "name": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "objective_id": {
                    "type": "string",
                    "description": "Reference to parent objective"
                },
                "status": {
                    "type": "string",
                    "enum": [
                        "planned",
                        "in_progress",
                        "complete",
                        "cancelled"
                    ]
                }
            }
        },
        "Rule": {
            "type": "object",
            "description": "User story using Three Rs format: As a {role}, I want to {requirement}, so I can {reason}",
            "required": [
                "id",
                "feature_id",
                "role",
                "requirement",
                "reason"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier",
                    "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]*$"
                },
                "feature_id": {
                    "type": "string",
                    "description": "Reference to parent Feature"
                },
                "role": {
                    "type": "string",
                    "description": "The user role (e.g., 'meeting organizer', 'participant', 'user')"
                },
                "requirement": {
                    "type": "string",
                    "description": "What they need (e.g., 'set weekly recurrence on specific days')"
                },
                "reason": {
                    "type": "string",
                    "description": "Why they need it (e.g., 'schedule regular team standups')"
                },
                "status": {
                    "type": "string",
                    "enum": [
                        "draft",
                        "active",
                        "deprecated"
                    ]
                }
            }
        },
        "Scenario": {
            "type": "object",
            "description": "Testable acceptance criterion using Given/When/Then inspired narrative",
            "required": [
                "id",
                "rule_id",
                "name",
                "narrative"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier",
                    "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]*$"
                },
                "rule_id": {
                    "type": "string",
                    "description": "Reference to parent Rule"
                },
                "name": {
                    "type": "string",
                    "description": "Short descriptive name"
                },
                "narrative": {
                    "type": "string",
                    "description": "Freeform Given/When/Then inspired description. Must be precise enough for a UI agent (human or LLM) to navigate and validate."
                },
                "status": {
                    "type": "string",
                    "enum": [
                        "draft",
                        "active",
                        "deprecated"
                    ]
                }
            }
        },
        "Specification": {
            "type": "object",
            "description": "Non-functional requirement using RFC 2119 language",
            "required": [
                "id",
                "feature_id",
                "name",
                "narrative",
                "category"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier",
                    "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]*$"
                },
                "feature_id": {
                    "type": "string",
                    "description": "Reference to parent Feature"
                },
                "name": {
                    "type": "string",
                    "description": "Short descriptive name"
                },
                "narrative": {
                    "type": "string",
                    "description": "RFC 2119 requirement statement using MUST, SHOULD, MAY keywords"
                },
                "category": {
                    "type": "string",
                    "enum": [
                        "performance",
                        "security",
                        "usability",
                        "reliability",
                        "accessibility",
                        "maintainability"
                    ]
                },
                "status": {
                    "type": "string",
                    "enum": [
                        "draft",
                        "active",
                        "deprecated"
                    ]
                }
            }
        },
        "Evidence": {
            "type": "object",
            "description": "Artifact that validates a Scenario or Specification",
            "required": [
                "id",
                "release_id",
                "type",
                "captured_at"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier",
                    "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]*$"
                },
                "release_id": {
                    "type": "string",
                    "description": "Release that produced this evidence"
                },
                "scenario_id": {
                    "type": "string",
                    "description": "Scenario being validated (if applicable)"
                },
                "specification_id": {
                    "type": "string",
                    "description": "Specification being validated (if applicable)"
                },
                "type": {
                    "type": "string",
                    "enum": [
                        "test_result",
                        "screenshot",
                        "recording",
                        "document"
                    ]
                },
                "artifact_url": {
                    "type": "string",
                    "description": "Link to artifact"
                },
                "captured_at": {
                    "type": "string",
                    "format": "date-time",
                    "description": "When evidence was captured"
                }
            }
        },
        "Evaluation": {
            "type": "object",
            "description": "Pass/Fail verdict on Evidence",
            "required": [
                "id",
                "evidence_id",
                "verdict",
                "evaluated_at"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier",
                    "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]*$"
                },
                "evidence_id": {
                    "type": "string",
                    "description": "Evidence being evaluated"
                },
                "verdict": {
                    "type": "string",
                    "enum": [
                        "pass",
                        "fail",
                        "inconclusive"
                    ]
                },
                "evaluator_id": {
                    "type": "string",
                    "description": "Person who evaluated"
                },
                "evaluated_at": {
                    "type": "string",
                    "format": "date-time",
                    "description": "When evaluation occurred"
                },
                "notes": {
                    "type": "string",
                    "description": "Evaluation notes"
                }
            }
        },
        "Metric": {
            "type": "object",
            "description": "Raw measurement gathered from operations",
            "required": [
                "id",
                "name",
                "unit"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier",
                    "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]*$"
                },
                "name": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "unit": {
                    "type": "string",
                    "description": "Unit of measure (e.g., hours, percent, count)"
                },
                "current_value": {
                    "type": "number",
                    "description": "Most recent measured value"
                },
                "source": {
                    "type": "string",
                    "description": "Data source for this metric"
                }
            }
        },
        "KPI": {
            "type": "object",
            "description": "Key Performance Indicator - a metric aligned to an objective",
            "required": [
                "id",
                "metric_id",
                "target_value",
                "direction"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier",
                    "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]*$"
                },
                "metric_id": {
                    "type": "string",
                    "description": "Reference to the underlying metric"
                },
                "objective_id": {
                    "type": "string",
                    "description": "Optional reference to aligned objective"
                },
                "target_value": {
                    "type": "number",
                    "description": "Target value for this KPI"
                },
                "direction": {
                    "type": "string",
                    "enum": [
                        "increase",
                        "decrease",
                        "maintain"
                    ],
                    "description": "Desired direction of change"
                },
                "threshold_warning": {
                    "type": "number",
                    "description": "Warning threshold value"
                },
                "threshold_critical": {
                    "type": "number",
                    "description": "Critical threshold value"
                }
            }
        },
        "Initiative": {
            "type": "object",
            "description": "Short-term focused effort to move a KPI",
            "required": [
                "id",
                "name",
                "kpi_id"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier",
                    "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]*$"
                },
                "name": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "kpi_id": {
                    "type": "string",
                    "description": "Reference to the KPI this initiative aims to move"
                },
                "status": {
                    "type": "string",
                    "enum": [
                        "planned",
                        "active",
                        "complete",
                        "cancelled"
                    ]
                },
                "start_date": {
                    "type": "string",
                    "format": "date"
                },
                "end_date": {
                    "type": "string",
                    "format": "date"
                }
            }
        },
        "Activity": {
            "type": "object",
            "description": "Discrete unit of work",
            "required": [
                "id",
                "name"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier",
                    "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]*$"
                },
                "name": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "parent_id": {
                    "type": "string",
                    "description": "Reference to parent activity for decomposition"
                },
                "initiative_id": {
                    "type": "string",
                    "description": "Reference to parent initiative"
                },
                "blocked_by": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "description": "IDs of blocking activities"
                },
                "status": {
                    "type": "string",
                    "enum": [
                        "backlog",
                        "ready",
                        "in_progress",
                        "blocked",
                        "complete"
                    ]
                }
            }
        },
        "Role": {
            "type": "object",
            "description": "Abstract function or job title",
            "required": [
                "id",
                "name"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier",
                    "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]*$"
                },
                "name": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                }
            }
        },
        "Assignment": {
            "type": "object",
            "description": "Planned slot for a role needed to complete work (The Plan)",
            "required": [
                "id",
                "activity_id",
                "role_id",
                "quantity"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier",
                    "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]*$"
                },
                "activity_id": {
                    "type": "string",
                    "description": "Reference to the activity requiring this role"
                },
                "role_id": {
                    "type": "string",
                    "description": "Reference to the required role"
                },
                "quantity": {
                    "type": "number",
                    "description": "Amount needed (FTE, count, etc.)"
                },
                "unit": {
                    "type": "string",
                    "description": "Unit of measure for quantity",
                    "default": "fte"
                },
                "raci_type": {
                    "type": "string",
                    "enum": [
                        "responsible",
                        "accountable",
                        "consulted",
                        "informed"
                    ],
                    "description": "RACI responsibility type"
                }
            }
        },
        "Allocation": {
            "type": "object",
            "description": "Concrete contribution from a resource to fulfill an assignment (The Fulfillment)",
            "required": [
                "id",
                "assignment_id",
                "person_id",
                "quantity_contributed"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "description": "Unique identifier",
                    "pattern": "^[a-zA-Z0-9][a-zA-Z0-9-]*$"
                },
                "assignment_id": {
                    "type": "string",
                    "description": "Reference to the assignment being fulfilled"
                },
                "person_id": {
                    "type": "string",
                    "description": "Reference to the person providing the allocation"
                },
                "quantity_contributed": {
                    "type": "number",
                    "description": "Amount contributed by this resource"
                },
                "start_date": {
                    "type": "string",
                    "format": "date"
                },
                "end_date": {
                    "type": "string",
                    "format": "date"
                }
            }
        }
    }
}