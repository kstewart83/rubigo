# ============================================================================
# Collaboration Module Requirements
# ============================================================================
# This file contains requirements for the Collaboration module including:
# - Calendar (Phase 1)
# - Email, Chat, Screen Share (Phase 2 - stubs)

[description]
overview = """
COLLABORATION MODULE
- Calendar: Event scheduling, recurrence, participants, views
- Email: Coming Soon
- Chat: Coming Soon  
- Screen Share: Coming Soon

This module provides unified collaboration tools for the organization.
"""

# ============================================================================
# SUB-OBJECTIVES (under obj-rubigo-events from projects.toml)
# ============================================================================

[[objectives]]
id = "obj-calendar-core"
title = "Calendar Event Management"
description = "Users must be able to create, view, edit, and delete calendar events with support for various event types and scheduling flexibility"
project_id = "d4e5f6"
parent_id = "obj-rubigo-events"
status = "planned"

[[objectives]]
id = "obj-calendar-recurrence"
title = "Recurring Event Support"
description = "Users must be able to schedule recurring events with various frequencies and manage individual instances without affecting the entire series"
project_id = "d4e5f6"
parent_id = "obj-rubigo-events"
status = "planned"

[[objectives]]
id = "obj-calendar-views"
title = "Calendar Visualization"
description = "Users must be able to view their schedule in multiple formats (month, week) to effectively plan and manage their time"
project_id = "d4e5f6"
parent_id = "obj-rubigo-events"
status = "planned"

[[objectives]]
id = "obj-collaboration-future"
title = "Future Collaboration Tools"
description = "The platform will provide integrated email, chat, and screen sharing capabilities to enable seamless team collaboration"
project_id = "d4e5f6"
parent_id = "obj-it-business-systems"
status = "planned"

# ============================================================================
# FEATURES - Calendar Core
# ============================================================================

[[features]]
id = "feat-calendar-crud"
name = "Calendar Event CRUD"
description = "Create, read, update, delete calendar events with full event details"
objective_id = "obj-calendar-core"
status = "planned"

[[features]]
id = "feat-calendar-recurrence"
name = "Recurring Event Management"
description = "Support for daily, weekly, monthly, yearly recurrence with instance deviations"
objective_id = "obj-calendar-recurrence"
status = "planned"

[[features]]
id = "feat-calendar-views"
name = "Calendar View Modes"
description = "Month view grid and week view with time slots"
objective_id = "obj-calendar-views"
status = "planned"

[[features]]
id = "feat-calendar-navigation"
name = "Calendar Navigation"
description = "Navigate between months/weeks, jump to today, work week toggle"
objective_id = "obj-calendar-views"
status = "planned"

[[features]]
id = "feat-calendar-participants"
name = "Event Participants"
description = "Assign organizers and participants to events"
objective_id = "obj-calendar-core"
status = "planned"

# ============================================================================
# RULES - Calendar Event Management
# ============================================================================

# --- Event CRUD Rules ---

[[rules]]
id = "rule-calendar-list"
feature_id = "feat-calendar-crud"
role = "Platform User"
requirement = "view all calendar events in a visual calendar format"
reason = "understand my schedule and upcoming commitments"
status = "draft"

[[rules]]
id = "rule-calendar-create"
feature_id = "feat-calendar-crud"
role = "Platform User"
requirement = "create a new calendar event with title, date, time, and type"
reason = "schedule meetings and events"
status = "draft"

[[rules]]
id = "rule-calendar-view-detail"
feature_id = "feat-calendar-crud"
role = "Platform User"
requirement = "view full details of a calendar event"
reason = "see location, participants, and description"
status = "draft"

[[rules]]
id = "rule-calendar-edit"
feature_id = "feat-calendar-crud"
role = "Event Organizer"
requirement = "modify an existing calendar event"
reason = "update meeting details as plans change"
status = "draft"

[[rules]]
id = "rule-calendar-delete"
feature_id = "feat-calendar-crud"
role = "Event Organizer"
requirement = "delete a calendar event"
reason = "remove cancelled meetings from the schedule"
status = "draft"

# --- Recurrence Rules ---

[[rules]]
id = "rule-calendar-recurrence-create"
feature_id = "feat-calendar-recurrence"
role = "Platform User"
requirement = "create recurring events with daily, weekly, monthly, or yearly frequency"
reason = "schedule repetitive meetings without manual entry"
status = "draft"

[[rules]]
id = "rule-calendar-recurrence-days"
feature_id = "feat-calendar-recurrence"
role = "Platform User"
requirement = "specify which days of the week for weekly recurring events"
reason = "schedule meetings that occur on specific days like Mon/Wed/Fri"
status = "draft"

[[rules]]
id = "rule-calendar-instance-cancel"
feature_id = "feat-calendar-recurrence"
role = "Event Organizer"
requirement = "cancel a single instance of a recurring event"
reason = "skip one occurrence without deleting the entire series"
status = "draft"

[[rules]]
id = "rule-calendar-instance-modify"
feature_id = "feat-calendar-recurrence"
role = "Event Organizer"
requirement = "modify a single instance of a recurring event"
reason = "change the time or location for one occurrence"
status = "draft"

# --- View Rules ---

[[rules]]
id = "rule-calendar-month-view"
feature_id = "feat-calendar-views"
role = "Platform User"
requirement = "view the calendar in month grid format showing all events as pills"
reason = "see an overview of the entire month"
status = "draft"

[[rules]]
id = "rule-calendar-week-view"
feature_id = "feat-calendar-views"
role = "Platform User"
requirement = "view the calendar in week format with time slots"
reason = "see detailed daily schedule with time positioning"
status = "draft"

[[rules]]
id = "rule-calendar-workweek"
feature_id = "feat-calendar-views"
role = "Platform User"
requirement = "toggle between full week and work week (Mon-Fri) display"
reason = "focus on business days without weekend clutter"
status = "draft"

# --- Navigation Rules ---

[[rules]]
id = "rule-calendar-navigate"
feature_id = "feat-calendar-navigation"
role = "Platform User"
requirement = "navigate forward and backward through months or weeks"
reason = "view past and future schedules"
status = "draft"

[[rules]]
id = "rule-calendar-today"
feature_id = "feat-calendar-navigation"
role = "Platform User"
requirement = "jump directly to today's date"
reason = "quickly return to current schedule after browsing"
status = "draft"

# --- Participant Rules ---

[[rules]]
id = "rule-calendar-add-participants"
feature_id = "feat-calendar-participants"
role = "Event Organizer"
requirement = "add personnel as participants to an event"
reason = "invite colleagues to meetings"
status = "draft"

# ============================================================================
# SCENARIOS - Calendar BDD Test Cases
# ============================================================================

# --- Month View Scenarios ---

[[scenarios]]
id = "scen-calendar-month-display"
rule_id = "rule-calendar-month-view"
name = "Display month grid"
narrative = "Given I am signed in, when I navigate to Calendar, then I see a month grid with day cells and colored event pills"
status = "draft"

[[scenarios]]
id = "scen-calendar-month-nav"
rule_id = "rule-calendar-navigate"
name = "Navigate between months"
narrative = "Given I am viewing the calendar, when I click the next arrow, then the display advances to the next month"
status = "draft"

[[scenarios]]
id = "scen-calendar-today"
rule_id = "rule-calendar-today"
name = "Jump to today"
narrative = "Given I am viewing a future month, when I click Today, then the calendar returns to the current month with today highlighted"
status = "draft"

# --- Week View Scenarios ---

[[scenarios]]
id = "scen-calendar-week-display"
rule_id = "rule-calendar-week-view"
name = "Display week view with time slots"
narrative = "Given I am viewing the calendar in week mode, then I see 7 day columns with time slots from 6AM to 10PM"
status = "draft"

[[scenarios]]
id = "scen-calendar-workweek-toggle"
rule_id = "rule-calendar-workweek"
name = "Toggle work week mode"
narrative = "Given I am viewing the calendar, when I enable work week mode, then only Monday through Friday are displayed"
status = "draft"

# --- Event Creation Scenarios ---

[[scenarios]]
id = "scen-calendar-create-simple"
rule_id = "rule-calendar-create"
name = "Create simple event"
narrative = "Given I click New Event, when I fill in title, date, and time and click Save, then the event appears on the calendar"
status = "draft"

[[scenarios]]
id = "scen-calendar-create-recurring"
rule_id = "rule-calendar-recurrence-create"
name = "Create recurring weekly event"
narrative = "Given I am creating an event, when I enable recurrence with Weekly frequency and select Mon/Wed/Fri, then events appear on those days"
status = "draft"

# --- Event Details Scenarios ---

[[scenarios]]
id = "scen-calendar-view-detail"
rule_id = "rule-calendar-view-detail"
name = "View event details panel"
narrative = "Given I am viewing the calendar, when I click on an event pill, then a details panel opens showing title, time, location, and participants"
status = "draft"

[[scenarios]]
id = "scen-calendar-edit-event"
rule_id = "rule-calendar-edit"
name = "Edit existing event"
narrative = "Given I have an event details panel open, when I click Edit, modify fields, and Save, then the changes are reflected in the calendar"
status = "draft"

[[scenarios]]
id = "scen-calendar-delete-event"
rule_id = "rule-calendar-delete"
name = "Delete single event"
narrative = "Given I have an event details panel open, when I click Delete and confirm, then the event is removed from the calendar"
status = "draft"

# --- Recurring Instance Scenarios ---

[[scenarios]]
id = "scen-calendar-cancel-instance"
rule_id = "rule-calendar-instance-cancel"
name = "Cancel single recurrence instance"
narrative = "Given I click on one instance of a recurring event, when I select Cancel This Instance, then only that date is removed while other occurrences remain"
status = "draft"

[[scenarios]]
id = "scen-calendar-modify-instance"
rule_id = "rule-calendar-instance-modify"
name = "Modify single recurrence instance"
narrative = "Given I am editing one instance of a recurring event, when I change the time and save for This Instance Only, then only that occurrence is updated"
status = "draft"

# ============================================================================
# EMAIL MODULE - Internal Messaging (Gmail/Proton-like UX)
# ============================================================================

[[objectives]]
id = "obj-email-core"
title = "Internal Email Communications"
description = "Users must be able to send and receive internal messages to colleagues in the personnel directory with a familiar email-like experience"
project_id = "d4e5f6"
parent_id = "obj-collaboration-future"
status = "planned"

[[objectives]]
id = "obj-email-organization"
title = "Email Organization"
description = "Users must be able to organize their messages with folders, labels, and search to efficiently manage their inbox"
project_id = "d4e5f6"
parent_id = "obj-collaboration-future"
status = "planned"

# --- Email Features ---

[[features]]
id = "feat-email-compose"
name = "Email Composition"
description = "Compose and send messages to personnel with rich text and attachments"
objective_id = "obj-email-core"
status = "planned"

[[features]]
id = "feat-email-inbox"
name = "Email Inbox"
description = "View received messages with sender, subject, preview, and timestamp"
objective_id = "obj-email-core"
status = "planned"

[[features]]
id = "feat-email-thread"
name = "Email Threading"
description = "View and reply to message threads/conversations"
objective_id = "obj-email-core"
status = "planned"

[[features]]
id = "feat-email-folders"
name = "Email Folders"
description = "Organize messages in Inbox, Sent, Drafts, Trash, and custom folders"
objective_id = "obj-email-organization"
status = "planned"

[[features]]
id = "feat-email-search"
name = "Email Search"
description = "Search messages by sender, subject, content, and date"
objective_id = "obj-email-organization"
status = "planned"

# --- Email Rules ---

[[rules]]
id = "rule-email-compose"
feature_id = "feat-email-compose"
role = "Platform User"
requirement = "compose a new email with recipients, subject, and body"
reason = "communicate with colleagues"
status = "draft"

[[rules]]
id = "rule-email-recipient-picker"
feature_id = "feat-email-compose"
role = "Platform User"
requirement = "search and select recipients from the personnel directory"
reason = "easily find and address colleagues"
status = "draft"

[[rules]]
id = "rule-email-send"
feature_id = "feat-email-compose"
role = "Platform User"
requirement = "send the composed email to selected recipients"
reason = "deliver my message"
status = "draft"

[[rules]]
id = "rule-email-drafts"
feature_id = "feat-email-compose"
role = "Platform User"
requirement = "save an email as a draft to finish later"
reason = "continue composing when I have more time"
status = "draft"

[[rules]]
id = "rule-email-inbox-view"
feature_id = "feat-email-inbox"
role = "Platform User"
requirement = "view my inbox with unread indicators and message previews"
reason = "quickly scan new messages"
status = "draft"

[[rules]]
id = "rule-email-read"
feature_id = "feat-email-inbox"
role = "Platform User"
requirement = "open and read a full email message"
reason = "understand the complete communication"
status = "draft"

[[rules]]
id = "rule-email-reply"
feature_id = "feat-email-thread"
role = "Platform User"
requirement = "reply to an email maintaining the conversation thread"
reason = "continue the discussion in context"
status = "draft"

[[rules]]
id = "rule-email-reply-all"
feature_id = "feat-email-thread"
role = "Platform User"
requirement = "reply to all recipients of an email"
reason = "keep everyone in the conversation informed"
status = "draft"

[[rules]]
id = "rule-email-forward"
feature_id = "feat-email-thread"
role = "Platform User"
requirement = "forward an email to other recipients"
reason = "share relevant information with others"
status = "draft"

[[rules]]
id = "rule-email-delete"
feature_id = "feat-email-folders"
role = "Platform User"
requirement = "move messages to trash"
reason = "remove unwanted messages from my inbox"
status = "draft"

[[rules]]
id = "rule-email-search"
feature_id = "feat-email-search"
role = "Platform User"
requirement = "search emails by keyword, sender, or date range"
reason = "find specific messages quickly"
status = "draft"

# --- Email Scenarios ---

[[scenarios]]
id = "scen-email-compose-send"
rule_id = "rule-email-compose"
name = "Compose and send email"
narrative = "Given I click Compose, when I select a recipient, enter subject and body, and click Send, then the message appears in my Sent folder and the recipient's Inbox"
status = "draft"

[[scenarios]]
id = "scen-email-inbox-list"
rule_id = "rule-email-inbox-view"
name = "View inbox messages"
narrative = "Given I navigate to Email, then I see my inbox with messages showing sender name, subject, preview, and timestamp with unread messages highlighted"
status = "draft"

[[scenarios]]
id = "scen-email-thread-view"
rule_id = "rule-email-reply"
name = "View and reply to thread"
narrative = "Given I open an email, when I click Reply, compose my response, and send, then all messages in the thread are visible in chronological order"
status = "draft"

# ============================================================================
# CHAT MODULE - Team Messaging (Slack/Discord-like UX)
# ============================================================================

[[objectives]]
id = "obj-chat-core"
title = "Real-time Team Messaging"
description = "Users must be able to have real-time conversations with colleagues through direct messages and group channels"
project_id = "d4e5f6"
parent_id = "obj-collaboration-future"
status = "planned"

[[objectives]]
id = "obj-chat-engagement"
title = "Chat Engagement Features"
description = "Users must be able to engage with messages through reactions, replies, and rich formatting to enable expressive communication"
project_id = "d4e5f6"
parent_id = "obj-collaboration-future"
status = "planned"

# --- Chat Features ---

[[features]]
id = "feat-chat-dm"
name = "Direct Messages"
description = "One-on-one messaging between users"
objective_id = "obj-chat-core"
status = "planned"

[[features]]
id = "feat-chat-channels"
name = "Chat Channels"
description = "Group conversations organized by topic or team"
objective_id = "obj-chat-core"
status = "planned"

[[features]]
id = "feat-chat-messages"
name = "Message Composition"
description = "Send messages with text, emoji, and formatting"
objective_id = "obj-chat-core"
status = "planned"

[[features]]
id = "feat-chat-reactions"
name = "Message Reactions"
description = "React to messages with emoji"
objective_id = "obj-chat-engagement"
status = "planned"

[[features]]
id = "feat-chat-threads"
name = "Threaded Replies"
description = "Reply to specific messages in a thread"
objective_id = "obj-chat-engagement"
status = "planned"

[[features]]
id = "feat-chat-presence"
name = "User Presence"
description = "See online/offline status of colleagues"
objective_id = "obj-chat-core"
status = "planned"

# --- Chat Rules ---

[[rules]]
id = "rule-chat-dm-start"
feature_id = "feat-chat-dm"
role = "Platform User"
requirement = "start a direct message conversation with a colleague"
reason = "have a private one-on-one discussion"
status = "draft"

[[rules]]
id = "rule-chat-channel-create"
feature_id = "feat-chat-channels"
role = "Platform User"
requirement = "create a new channel with a name and optional description"
reason = "organize team conversations by topic"
status = "draft"

[[rules]]
id = "rule-chat-channel-join"
feature_id = "feat-chat-channels"
role = "Platform User"
requirement = "browse and join available channels"
reason = "participate in relevant team discussions"
status = "draft"

[[rules]]
id = "rule-chat-send"
feature_id = "feat-chat-messages"
role = "Platform User"
requirement = "send a message to a DM or channel"
reason = "communicate with colleagues in real-time"
status = "draft"

[[rules]]
id = "rule-chat-emoji"
feature_id = "feat-chat-messages"
role = "Platform User"
requirement = "insert emoji into messages"
reason = "express emotions and add personality"
status = "draft"

[[rules]]
id = "rule-chat-react"
feature_id = "feat-chat-reactions"
role = "Platform User"
requirement = "add an emoji reaction to any message"
reason = "acknowledge or respond without typing a full message"
status = "draft"

[[rules]]
id = "rule-chat-thread-reply"
feature_id = "feat-chat-threads"
role = "Platform User"
requirement = "reply to a specific message starting a thread"
reason = "have focused discussions without cluttering the main channel"
status = "draft"

[[rules]]
id = "rule-chat-presence"
feature_id = "feat-chat-presence"
role = "Platform User"
requirement = "see which colleagues are currently online"
reason = "know if someone is available for a conversation"
status = "draft"

# --- Chat Scenarios ---

[[scenarios]]
id = "scen-chat-dm-conversation"
rule_id = "rule-chat-dm-start"
name = "Start direct message"
narrative = "Given I click New Message, when I select a colleague and send a message, then a DM conversation is created and the message appears"
status = "draft"

[[scenarios]]
id = "scen-chat-channel-create"
rule_id = "rule-chat-channel-create"
name = "Create new channel"
narrative = "Given I click Create Channel, when I enter a name and description, then the channel appears in my channel list"
status = "draft"

[[scenarios]]
id = "scen-chat-react"
rule_id = "rule-chat-react"
name = "React to message"
narrative = "Given I hover over a message, when I click Add Reaction and select an emoji, then the reaction appears under the message"
status = "draft"

[[scenarios]]
id = "scen-chat-thread"
rule_id = "rule-chat-thread-reply"
name = "Reply in thread"
narrative = "Given I click Reply on a message, when I type and send my response, then it appears in a threaded view under the original message"
status = "draft"

# ============================================================================
# SCREEN SHARE MODULE - Remote Collaboration
# ============================================================================

[[objectives]]
id = "obj-screenshare-core"
title = "Screen Sharing Capability"
description = "Users must be able to share their screen with colleagues for remote collaboration and presentations"
project_id = "d4e5f6"
parent_id = "obj-collaboration-future"
status = "planned"

# --- Screen Share Features ---

[[features]]
id = "feat-screenshare-start"
name = "Screen Share Session"
description = "Start and stop screen sharing with selected participants"
objective_id = "obj-screenshare-core"
status = "planned"

[[features]]
id = "feat-screenshare-view"
name = "Screen Share Viewer"
description = "View shared screens from other users"
objective_id = "obj-screenshare-core"
status = "planned"

[[features]]
id = "feat-screenshare-chat"
name = "Screen Share from Chat"
description = "Initiate screen sharing directly from a chat conversation"
objective_id = "obj-screenshare-core"
status = "planned"

# --- Screen Share Rules ---

[[rules]]
id = "rule-screenshare-start"
feature_id = "feat-screenshare-start"
role = "Platform User"
requirement = "start sharing my screen with one or more colleagues"
reason = "demonstrate something or collaborate visually"
status = "draft"

[[rules]]
id = "rule-screenshare-select"
feature_id = "feat-screenshare-start"
role = "Platform User"
requirement = "choose to share my entire screen or a specific window"
reason = "control what others can see"
status = "draft"

[[rules]]
id = "rule-screenshare-stop"
feature_id = "feat-screenshare-start"
role = "Platform User"
requirement = "stop sharing my screen at any time"
reason = "end the session when done"
status = "draft"

[[rules]]
id = "rule-screenshare-view"
feature_id = "feat-screenshare-view"
role = "Platform User"
requirement = "view when a colleague is sharing their screen"
reason = "follow along with their demonstration"
status = "draft"

[[rules]]
id = "rule-screenshare-from-chat"
feature_id = "feat-screenshare-chat"
role = "Platform User"
requirement = "click a Share Screen button in an active chat"
reason = "quickly share my screen during a conversation"
status = "draft"

# --- Screen Share Scenarios ---

[[scenarios]]
id = "scen-screenshare-start"
rule_id = "rule-screenshare-start"
name = "Start screen share"
narrative = "Given I click Share Screen, when I select a screen or window and click Start, then participants see my shared screen"
status = "draft"

[[scenarios]]
id = "scen-screenshare-from-dm"
rule_id = "rule-screenshare-from-chat"
name = "Share screen from DM"
narrative = "Given I am in a DM conversation, when I click the Share Screen button, then my screen becomes visible to the other person"
status = "draft"

[[scenarios]]
id = "scen-screenshare-stop"
rule_id = "rule-screenshare-stop"
name = "Stop screen share"
narrative = "Given I am sharing my screen, when I click Stop Sharing, then participants no longer see my screen"
status = "draft"

