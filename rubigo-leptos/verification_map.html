<!DOCTYPE html>
<html>
<head>
    <style>
        body { margin: 0; background: #222; }
        #map-container {
            position: relative;
            width: 1000px;
            height: 507px;
            background: #333;
            margin: 50px auto;
        }
        img {
            width: 100%;
            height: 100%;
        }
        .marker {
            position: absolute;
            width: 6px;
            height: 6px;
            background: red;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
        }
        .label {
            position: absolute;
            color: white;
            font-family: sans-serif;
            font-size: 10px;
            transform: translate(5px, -50%);
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div id="map-container">
        <!-- We will load the SVG directly or as image -->
        <!-- Since we are in the same repo, we can reference /assets/world-states.svg if served, but for file:// we need relative path -->
        <img src="gui-server/assets/world-states.svg" />
    </div>

    <script>
        const cities = [
            { name: "London", lat: 51.5074, lon: -0.1278 },
            { name: "New York", lat: 40.7128, lon: -74.0060 },
            { name: "San Francisco", lat: 37.7749, lon: -122.4194 },
            { name: "Tokyo", lat: 35.6762, lon: 139.6503 },
            { name: "Cape Town", lat: -33.9249, lon: 18.4241 },
            { name: "Sydney", lat: -33.8688, lon: 151.2093 },
            { name: "Seattle", lat: 47.6062, lon: -122.3321 },
            { name: "Los Angeles", lat: 34.0522, lon: -118.2437 },
            { name: "Equator-0", lat: 0, lon: 0 },
            { name: "Equator-KE", lat: 0, lon: 38 },
        ];

        // Parameters to tune
        const x_offset = 458.0;
        const x_scale = 2.87;
        const y_offset = 256.8;
        const y_scale = 207.0;

        function project(lat, lon) {
            let x = x_offset + (lon * x_scale);
            
            // Miller
            let lat_rad = lat * Math.PI / 180;
            let val = Math.PI/4 + 0.4 * lat_rad;
            let y = y_offset - (y_scale * Math.log(Math.tan(val)));

            // Clamp defaults from code (not strictly needed for visual test)
            return { x, y };
        }

        const container = document.getElementById('map-container');

        cities.forEach(city => {
            const pos = project(city.lat, city.lon);
            
            const marker = document.createElement('div');
            marker.className = 'marker';
            marker.style.left = (pos.x / 1000 * 100) + '%';
            marker.style.top = (pos.y / 507 * 100) + '%';
            
            const label = document.createElement('div');
            label.className = 'label';
            label.innerText = city.name;
            label.style.left = (pos.x / 1000 * 100) + '%';
            label.style.top = (pos.y / 507 * 100) + '%';

            container.appendChild(marker);
            container.appendChild(label);
        });
    </script>
</body>
</html>
